# サーバー構築計画書

## 1. 概要

この文書は、サーバー構築に関する計画書です。構築対象、目的、スケジュール、構成情報などを整理します。

---

## 2. 構築目的

| 項目 | 内容 |
|------|------|
| 主目的 | 社内向けWebアプリケーションのホスティング |
| 副目的 | 検証・学習用の環境提供 |
| 運用方針 | 内部ネットワーク限定、24時間稼働、週次バックアップ |

---

## 3. スケジュール

| フェーズ | 作業内容 | 予定日 | 担当者 |
|---------|----------|--------|--------|
| 設計     | 要件定義・構成検討 | 2025/06/01 | 堀内 |
| 構築     | OSインストール、ミドルウェア設定 | 2025/06/05 | 堀内 |
| テスト   | 動作確認・負荷テスト | 2025/06/08 | 堀内 |
| 引き渡し | 文書化・ユーザー引き渡し | 2025/06/10 | 堀内 |

---

## 4. サーバー構成情報

| 項目 | 内容 |
|------|------|
| OS | AlmaLinux 9.4 |
| サーバー種別 | 物理サーバ |
| CPU / RAM | 8core / 32GB |
| ストレージ | SSD 1TB |
| IPアドレス | 192.168.1.10 |
| ホスト名 | app-server.localdomain |

---

## 5. ネットワーク構成図（PlantUML等で作図）

※ここに画像 or コード参照を入れる  
例：

@startuml
actor User
User --> Server : HTTP Request
Server --> Database : SQL Query
@enduml

---

## 6. サービス構成と役割

| サービス | ポート | 用途 | 備考 |
|----------|--------|------|------|
| Apache HTTP Server | 80 / 443 | Webサーバー | mod_ssl使用 |
| PostgreSQL | 5432 | DB | 内部通信のみ |
| SSH | 22 | 管理用 | 公開鍵認証のみ許可 |
| Firewalld | - | FW設定 | zone: internal |

---

## 7. 設定ファイル例

httpd.conf（一部抜粋）
Listen 80
ServerName app-server.localdomain
DocumentRoot "/var/www/html"

---

## 8. バックアップ計画

| 種別 | 対象ディレクトリ | 頻度 | 方法 |
|------|------------------|------|------|
| データ | /var/lib/pgsql | 毎日 | cron + rsync |
| 設定ファイル | /etc | 週1回 | tarで固めて外部保存 |

---

## 9. トラブル対応方針

| 想定トラブル | 対応策 |
|--------------|--------|
| Webが表示されない | Apacheのログを確認 (`/var/log/httpd/`) |
| DBに接続できない | PostgreSQLの状態確認とポート開放 |
| SSH接続不可 | KVM経由で直接ログイン、firewalld設定確認 |

---

## 10. 備考・メモ

- rootパスワードおよび秘密鍵は別途安全な方法で保管。
- 初期構築後のスナップショットを保存予定。
- ドキュメントはすべてMarkdownで整備。


